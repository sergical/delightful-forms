<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Delightful Forms: A Journey from Basic to Beautiful</title>
    <link rel="stylesheet" href="./style.css" />
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
        <!-- Introduction -->
        <section>
          <h1>Delightful Forms</h1>
          <h3>A Journey from Basic to Beautiful</h3>
          <p>Building better form experiences in React</p>
        </section>

        <!-- Common Form Problems -->
        <section>
          <section>
            <h2>Common Form Problems</h2>
            <ul>
              <li class="fragment">Poor error handling</li>
              <li class="fragment">Confusing validation</li>
              <li class="fragment">No loading states</li>
              <li class="fragment">Jarring updates</li>
              <li class="fragment">Lost data on navigation</li>
            </ul>
            <aside class="notes">
              Mention that forms are often the most frustrating part of websites.
              Users abandon forms with poor experiences.
            </aside>
          </section>
        </section>

        <!-- Bad Examples -->
        <section>
          <section>
            <h2>The Bad & The Ugly</h2>
            <h4>Real-world examples of poor form UX</h4>
            <div class="image-placeholder">
              <p>[Insert painful form GIF here]</p>
            </div>
          </section>

          <section>
            <h3>Airline Booking Forms</h3>
            <div class="content-columns">
              <div>
                <ul>
                  <li>Complex multi-step processes</li>
                  <li>Unclear error messages</li>
                  <li>Session timeouts</li>
                  <li>Lost data on back navigation</li>
                </ul>
              </div>
              <div class="image-placeholder">
                <p>[Insert airline booking fail screenshot]</p>
              </div>
            </div>
          </section>

          <section>
            <h3>Common Anti-patterns</h3>
            <ul>
              <li class="fragment">Show all errors at once</li>
              <li class="fragment">Unclear requirements until submission</li>
              <li class="fragment">No feedback during submission</li>
              <li class="fragment">Losing state on navigation</li>
            </ul>
            <div class="image-placeholder fragment">
              <p>[Insert funny error message GIF]</p>
            </div>
          </section>
        </section>

        <!-- Basic Forms - Step 1 -->
        <section>
          <section>
            <h2>1. Basic Forms with Server Actions</h2>
            <h4>The Foundation</h4>
          </section>

          <section>
            <h3>HTML Form</h3>
            <pre><code class="language-jsx">&lt;form action={submitForm}&gt;
  &lt;div&gt;
    &lt;label htmlFor="name"&gt;Name&lt;/label&gt;
    &lt;input type="text" id="name" name="name" required /&gt;
  &lt;/div&gt;
  
  &lt;div&gt;
    &lt;label htmlFor="email"&gt;Email&lt;/label&gt;
    &lt;input type="email" id="email" name="email" required /&gt;
  &lt;/div&gt;
  
  &lt;button type="submit"&gt;Submit&lt;/button&gt;
&lt;/form&gt;</code></pre>
          </section>

          <section>
            <h3>Server Actions</h3>
            <pre><code class="language-typescript">'use server';

export async function submitForm(formData: FormData) {
  // Simulate server delay
  await new Promise(resolve => setTimeout(resolve, 1500));
  
  // Extract form data
  const name = formData.get('name') as string;
  const email = formData.get('email') as string;
  
  // Simple validation
  if (!name || !email) {
    return { error: 'All fields are required' };
  }
  
  // Process the submission
  console.log('Form submitted:', { name, email });
  
  // Redirect to success page
  redirect('/success');
}</code></pre>
          </section>

          <section>
            <h3>Demo: Basic Form</h3>
            <div class="demo-placeholder">
              <p>[Live Demo: Basic Form]</p>
            </div>
            <p class="fragment">Works without JavaScript!</p>
            <p class="fragment">But the UX is minimal...</p>
          </section>
        </section>

        <!-- Schema Validation - Step 2 -->
        <section>
          <section>
            <h2>2. Schema Validation with Zod</h2>
            <h4>Type-safe validation</h4>
          </section>

          <section>
            <h3>Define the Schema</h3>
            <pre><code class="language-typescript">import { z } from 'zod';

export const contactSchema = z.object({
  name: z.string().min(2, 'Name must be at least 2 characters'),
  email: z.string().email('Invalid email address'),
  message: z.string().min(10, 'Message must be at least 10 characters'),
});</code></pre>
          </section>

          <section>
            <h3>Server-side Validation</h3>
            <pre><code class="language-typescript">try {
  const validatedData = contactSchema.parse(formValues);
  // Process the valid submission
  return { status: 'success' };
} catch (error) {
  if (error instanceof z.ZodError) {
    const errors = error.errors.reduce((acc, curr) => {
      const path = curr.path[0] as string;
      acc[path] = curr.message;
      return acc;
    }, {} as Record<string, string>);
    
    return { errors, status: 'error' };
  }
}</code></pre>
          </section>

          <section>
            <h3>Client-side Feedback</h3>
            <pre><code class="language-jsx">&lt;div&gt;
  &lt;label htmlFor="email"&gt;Email&lt;/label&gt;
  &lt;input
    type="email"
    id="email"
    name="email"
    className={errors?.email ? 'border-red-500' : ''}
  /&gt;
  {errors?.email && (
    &lt;p className="text-red-600"&gt;{errors.email}&lt;/p&gt;
  )}
&lt;/div&gt;</code></pre>
          </section>

          <section>
            <h3>Demo: Validated Form</h3>
            <div class="demo-placeholder">
              <p>[Live Demo: Zod Validation]</p>
            </div>
            <div class="image-placeholder fragment">
              <p>[Insert validation GIF]</p>
            </div>
          </section>
        </section>

        <!-- Form Management - Step 3 -->
        <section>
          <section>
            <h2>3. Form State Management</h2>
            <h4>React Hook Form</h4>
          </section>

          <section>
            <h3>React Hook Form + Zod</h3>
            <pre><code class="language-typescript">import { useForm } from 'react-hook-form';
import { zodResolver } from '@hookform/resolvers/zod';

export default function ContactForm() {
  const { 
    register, 
    handleSubmit, 
    formState: { errors, isSubmitting } 
  } = useForm&lt;ContactFormValues&gt;({
    resolver: zodResolver(contactSchema)
  });

  const onSubmit = async (data: ContactFormValues) => {
    // Handle submission
  };

  return (
    &lt;form onSubmit={handleSubmit(onSubmit)}&gt;
      {/* Form fields with {register} */}
    &lt;/form&gt;
  );
}</code></pre>
          </section>

          <section>
            <h3>Benefits</h3>
            <ul>
              <li class="fragment">Real-time validation</li>
              <li class="fragment">Focused rerenders</li>
              <li class="fragment">Form state management</li>
              <li class="fragment">Submission handling</li>
            </ul>
            <div class="image-placeholder fragment">
              <p>[Insert hook form GIF]</p>
            </div>
          </section>
        </section>

        <!-- URL vs Client State - Step 4 -->
        <section>
          <section>
            <h2>4. State Persistence</h2>
            <h4>URL vs Client State</h4>
          </section>

          <section>
            <h3>URL Parameters</h3>
            <pre><code class="language-typescript">// URL: /form?name=John&email=john@example.com

const searchParams = useSearchParams();
const name = searchParams.get('name') || '';
const email = searchParams.get('email') || '';

// Update URL with form data
const updateUrlParams = (data) => {
  const params = new URLSearchParams(searchParams);
  Object.entries(data).forEach(([key, value]) => {
    if (value) params.set(key, value);
    else params.delete(key);
  });
  router.push(`/form?${params.toString()}`);
};</code></pre>
            <p class="fragment">Works for sharing and bookmarking</p>
            <p class="fragment">But has serious limitations...</p>
          </section>

          <section>
            <h3>URL Parameter Limitations</h3>
            <ul>
              <li class="fragment">URL length limitations (2-8KB)</li>
              <li class="fragment">Sensitive data exposed in URL</li>
              <li class="fragment">Can't store complex data types</li>
              <li class="fragment">URL encoding/decoding issues</li>
            </ul>
            <div class="image-placeholder fragment">
              <p>[Insert long URL image]</p>
            </div>
          </section>

          <section>
            <h3>Zustand + Cookie Storage</h3>
            <pre><code class="language-typescript">export const useFormStore = create(
  persist(
    (set) => ({
      currentStep: 0,
      formData: { name: '', email: '', message: '' },
      
      setField: (field, value) => 
        set((state) => ({ 
          formData: { ...state.formData, [field]: value } 
        })),
      
      nextStep: () => 
        set((state) => ({ 
          currentStep: state.currentStep + 1 
        })),
      // More actions...
    }),
    {
      name: 'form-storage',
      storage: createJSONStorage(() => cookieStorage),
    }
  )
);</code></pre>
          </section>

          <section>
            <h3>Demo: State Persistence</h3>
            <div class="content-columns">
              <div>
                <h4>URL State</h4>
                <ul>
                  <li>Shareable</li>
                  <li>Always accessible</li>
                  <li>Limited space</li>
                  <li>Visible in address bar</li>
                </ul>
              </div>
              <div>
                <h4>Cookie State</h4>
                <ul>
                  <li>Persists between sessions</li>
                  <li>More storage space</li>
                  <li>Private data</li>
                  <li>Complex data structures</li>
                </ul>
              </div>
            </div>
          </section>
        </section>

        <!-- Animations - Step 5 -->
        <section>
          <section>
            <h2>5. Animations</h2>
            <h4>Framer Motion</h4>
          </section>

          <section>
            <h3>Error Messages</h3>
            <pre><code class="language-jsx">import { motion, AnimatePresence } from 'framer-motion';

{/* Animated error message */}
&lt;AnimatePresence&gt;
  {errors.email && (
    &lt;motion.p
      initial={{ height: 0, opacity: 0 }}
      animate={{ height: 'auto', opacity: 1 }}
      exit={{ height: 0, opacity: 0 }}
      className="text-red-500"
    &gt;
      {errors.email.message}
    &lt;/motion.p&gt;
  )}
&lt;/AnimatePresence&gt;</code></pre>
          </section>

          <section>
            <h3>Submit Button</h3>
            <pre><code class="language-jsx">{/* Animated submit button */}
&lt;motion.button
  whileTap={{ scale: 0.98 }}
  className="submit-button"
  disabled={isSubmitting}
&gt;
  {isSubmitting ? (
    &lt;&gt;
      &lt;Loader2 className="mr-2 h-4 w-4 animate-spin" /&gt;
      Submitting...
    &lt;/&gt;
  ) : (
    'Submit'
  )}
&lt;/motion.button&gt;</code></pre>
          </section>

          <section>
            <h3>Demo: Animated Form</h3>
            <div class="demo-placeholder">
              <p>[Live Demo: Animations]</p>
            </div>
            <div class="image-placeholder fragment">
              <p>[Insert animation GIF]</p>
            </div>
          </section>
        </section>

        <!-- Multi-step Forms - Step 6 -->
        <section>
          <section>
            <h2>6. Multi-step Forms</h2>
            <h4>With persistent state</h4>
          </section>

          <section>
            <h3>Step Management</h3>
            <pre><code class="language-typescript">export default function MultiStepForm() {
  // Use our Zustand store for persistent state
  const [
    currentStep, 
    formData, 
    nextStep, 
    prevStep
  ] = useFormStore(state => [
    state.currentStep,
    state.formData,
    state.nextStep,
    state.prevStep
  ]);
  
  // Define steps with components
  const steps = [
    &lt;PersonalInfoStep next={nextStep} /&gt;,
    &lt;MessageStep prev={prevStep} next={nextStep} /&gt;,
    &lt;ReviewStep prev={prevStep} submit={submitForm} /&gt;
  ];
  
  return (
    &lt;div&gt;
      &lt;FormProgress currentStep={currentStep} totalSteps={steps.length} /&gt;
      {steps[currentStep]}
    &lt;/div&gt;
  );
}</code></pre>
          </section>

          <section>
            <h3>Progress Indicator</h3>
            <pre><code class="language-jsx">function FormProgress({ currentStep, totalSteps }) {
  return (
    &lt;div className="mb-6"&gt;
      &lt;div className="flex justify-between text-sm mb-1"&gt;
        &lt;span&gt;Step {currentStep + 1} of {totalSteps}&lt;/span&gt;
        &lt;span&gt;{Math.round(((currentStep + 1) / totalSteps) * 100)}% Complete&lt;/span&gt;
      &lt;/div&gt;
      &lt;div className="w-full bg-gray-200 h-2 rounded-full"&gt;
        &lt;div 
          className="bg-blue-500 h-2 rounded-full transition-all duration-300"
          style={{ width: `${((currentStep + 1) / totalSteps) * 100}%` }}
        &gt;&lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  );
}</code></pre>
          </section>

          <section>
            <h3>Demo: Multi-step Form</h3>
            <div class="demo-placeholder">
              <p>[Live Demo: Multi-step Form]</p>
            </div>
            <p class="fragment">Persistent state across steps</p>
            <p class="fragment">Resume where you left off</p>
          </section>
        </section>

        <!-- Key Takeaways -->
        <section>
          <section>
            <h2>Key Takeaways</h2>
            <ul>
              <li class="fragment">Progressive enhancement ensures forms work for everyone</li>
              <li class="fragment">Zod provides type-safe validation on client and server</li>
              <li class="fragment">React Hook Form improves UX and performance</li>
              <li class="fragment">State persistence strategies depend on your needs</li>
              <li class="fragment">Animations provide helpful feedback</li>
              <li class="fragment">Multi-step forms need careful state management</li>
            </ul>
          </section>

          <section>
            <h3>Form Design Principles</h3>
            <ul>
              <li class="fragment">Clear feedback at the right time</li>
              <li class="fragment">Progressive disclosure of complexity</li>
              <li class="fragment">Preserve user input at all costs</li>
              <li class="fragment">Make recovery from errors easy</li>
              <li class="fragment">Accessibility is not optional</li>
            </ul>
            <div class="image-placeholder fragment">
              <p>[Insert happy user GIF]</p>
            </div>
          </section>
        </section>

        <!-- Q&A -->
        <section>
          <h2>Questions?</h2>
          <p>
            <a href="https://github.com/sergical/delightful-forms">
              github.com/sergical/delightful-forms
            </a>
          </p>
          <div class="image-placeholder">
            <p>[Insert funny form-related GIF]</p>
          </div>
        </section>
      </div>
    </div>
    <script type="module" src="./main.ts"></script>
  </body>
</html>